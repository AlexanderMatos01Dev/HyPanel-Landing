---
import { Image } from "astro:assets";
import { ArrowRight, Clock } from "lucide-react";
import type { CollectionEntry } from "astro:content";

interface Props {
  relatedPosts: CollectionEntry<"blog">[];
}

const { relatedPosts } = Astro.props;
---

{relatedPosts.length > 0 && (
  <div class="mt-16">
    <div class="flex items-center justify-between mb-8">
      <h3 class="text-2xl font-bold text-white">Continue reading</h3>
      <a 
        href="/blog" 
        class="text-[#EDA333] hover:text-[#f5b94d] text-sm font-medium flex items-center gap-1 group"
      >
        View all
        <ArrowRight size={14} className="group-hover:translate-x-1 transition-transform" />
      </a>
    </div>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {relatedPosts.map((relatedPost) => (
        <a 
          href={`/blog/${relatedPost.slug}`}
          class="group block p-5 rounded-2xl bg-gradient-to-br from-[#151D2C]/80 to-[#0F1623]/80 border border-[#2A3B4C] hover:border-[#4DA6FF]/30 transition-all duration-300 hover:-translate-y-1"
        >
          <div class="w-full h-32 rounded-xl mb-4 relative overflow-hidden">
            {relatedPost.data.image ? (
              <Image 
                src={relatedPost.data.image} 
                alt={relatedPost.data.title} 
                class="w-full h-full object-cover"
                width={400}
                height={200}
              />
            ) : (
              <div class={`w-full h-full bg-gradient-to-br ${relatedPost.data.gradient} relative`}>
                <div class="absolute inset-0 opacity-30 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"></div>
                <div class="absolute inset-0 flex items-center justify-center">
                  <div class="w-10 h-10 rounded-lg bg-white/10 backdrop-blur-sm flex items-center justify-center">
                    <svg class="w-5 h-5 text-white/60" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                    </svg>
                  </div>
                </div>
              </div>
            )}
          </div>
          <span class="text-[10px] font-bold text-[#EDA333] uppercase tracking-wider">{relatedPost.data.category}</span>
          <h4 class="text-white font-semibold mt-2 mb-2 group-hover:text-[#4DA6FF] transition-colors line-clamp-2">
            {relatedPost.data.title}
          </h4>
          <p class="text-[#8B9BB4] text-sm line-clamp-2 mb-3">{relatedPost.data.excerpt}</p>
          <div class="flex items-center gap-2 text-[#6B7A8C] text-xs">
            <Clock size={12} />
            <span>{relatedPost.data.readTime}</span>
          </div>
        </a>
      ))}
    </div>
  </div>
)}
